{"uid":"5925b0fa470ebc8e","name":"test_edit_account_phoneNumber_invalid","fullName":"test.Cuentas.test_edit_account#test_edit_account_phoneNumber_invalid","historyId":"82bdd659c5703abda10ea2b967e5dbf1","time":{"start":1728476404447,"stop":1728476404650,"duration":203},"status":"skipped","statusMessage":"XFAIL This test case is expected to fail due to known issue.\n\nFailed: JSON schema validation failed: 'name' is a required property\n\nFailed validating 'required' in schema:\n    {'type': 'object',\n     'properties': {'id': {'type': ['string', 'null']},\n                    'name': {'type': 'string'},\n                    'deleted': {'type': ['boolean', 'null']},\n                    'website': {'type': ['string', 'null']},\n                    'emailAddress': {'type': ['string', 'null']},\n                    'phoneNumber': {'type': ['string', 'null']},\n                    'type': {'type': ['string', 'null']},\n                    'industry': {'type': ['string', 'null']},\n                    'sicCode': {'type': ['string', 'null']},\n                    'billingAddressStreet': {'type': ['string', 'null']},\n                    'billingAddressCity': {'type': ['string', 'null']},\n                    'billingAddressState': {'type': ['string', 'null']},\n                    'billingAddressCountry': {'type': ['string', 'null']},\n                    'billingAddressPostalCode': {'type': ['string',\n                                                          'null']},\n                    'shippingAddressStreet': {'type': ['string', 'null']},\n                    'shippingAddressCity': {'type': ['string', 'null']},\n                    'shippingAddressState': {'type': ['string', 'null']},\n                    'shippingAddressCountry': {'type': ['string', 'null']},\n                    'shippingAddressPostalCode': {'type': ['string',\n                                                           'null']},\n                    'description': {'type': ['string', 'null']},\n                    'createdAt': {'type': ['string', 'null']},\n                    'modifiedAt': {'type': ['string', 'null']},\n                    'electronicAddressScheme': {'type': ['string', 'null']},\n                    'electronicAddressIdentifier': {'type': ['string',\n                                                             'null']},\n                    'emailAddressIsOptedOut': {'type': ['boolean', 'null']},\n                    'emailAddressIsInvalid': {'type': ['boolean', 'null']},\n                    'phoneNumberIsOptedOut': {'type': ['boolean', 'null']},\n                    'phoneNumberIsInvalid': {'type': ['boolean', 'null']},\n                    'emailAddressData': {'type': 'array', 'items': {}},\n                    'phoneNumberData': {'type': 'array', 'items': {}},\n                    'campaignId': {'type': ['string', 'null']},\n                    'campaignName': {'type': ['string', 'null']},\n                    'createdById': {'type': ['string', 'null']},\n                    'createdByName': {'type': ['string', 'null']},\n                    'modifiedById': {'type': ['string', 'null']},\n                    'modifiedByName': {'type': ['string', 'null']},\n                    'assignedUserId': {'type': ['string', 'null']},\n                    'assignedUserName': {'type': ['string', 'null']},\n                    'teamsIds': {'type': 'array', 'items': {}},\n                    'teamsNames': {'type': 'object'},\n                    'originalLeadId': {'type': ['string', 'null']},\n                    'originalLeadName': {'type': ['string', 'null']},\n                    'priceBookId': {'type': ['string', 'null']},\n                    'priceBookName': {'type': ['string', 'null']},\n                    'isFollowed': {'type': ['boolean', 'null']},\n                    'followersIds': {'type': 'array', 'items': {}},\n                    'followersNames': {'type': 'object'},\n                    'isStarred': {'type': ['boolean', 'null']},\n                    'supplierId': {'type': ['string', 'null']},\n                    'supplierName': {'type': ['string', 'null']}},\n     'required': ['name']}\n\nOn instance:\n    {'messageTranslation': {'label': 'validationFailure',\n                            'scope': None,\n                            'data': {'field': 'phoneNumber',\n                                     'type': 'valid'}}}","statusTrace":"response = {'messageTranslation': {'data': {'field': 'phoneNumber', 'type': 'valid'}, 'label': 'validationFailure', 'scope': None}}\nschema_file = 'view_account_schema.json'\n\n    @staticmethod\n    def validate_json_schema(response, schema_file):\n        try:\n            schema = load_schema_resource(schema_file)\n        except FileNotFoundError:\n            pytest.fail(f\"Schema file '{schema_file}' not found\")\n        except json.JSONDecodeError as err:\n            pytest.fail(f\"Failed to decode JSON schema: {err}\")\n    \n        try:\n>           jsonschema.validate(instance=response, schema=schema)\n\nsrc/assertions/schema_assertions.py:18: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ninstance = {'messageTranslation': {'data': {'field': 'phoneNumber', 'type': 'valid'}, 'label': 'validationFailure', 'scope': None}}\nschema = {'properties': {'assignedUserId': {'type': ['string', 'null']}, 'assignedUserName': {'type': ['string', 'null']}, 'bil...string', 'null']}, 'billingAddressCountry': {'type': ['string', 'null']}, ...}, 'required': ['name'], 'type': 'object'}\ncls = <class 'jsonschema.validators.Draft202012Validator'>, args = ()\nkwargs = {}\nvalidator = Draft202012Validator(schema={'properties': {'assignedUserId': {'type': ['string', 'null']}, 'assignedUserName': {'type...llingAddressCountry': {'type': ['string', 'null']}, ...}, 'required': ['name'], 'type': 'object'}, format_checker=None)\nerror = <ValidationError: \"'name' is a required property\">\n\n    def validate(instance, schema, cls=None, *args, **kwargs):  # noqa: D417\n        \"\"\"\n        Validate an instance under the given schema.\n    \n            >>> validate([2, 3, 4], {\"maxItems\": 2})\n            Traceback (most recent call last):\n                ...\n            ValidationError: [2, 3, 4] is too long\n    \n        :func:`~jsonschema.validators.validate` will first verify that the\n        provided schema is itself valid, since not doing so can lead to less\n        obvious error messages and fail in less obvious or consistent ways.\n    \n        If you know you have a valid schema already, especially\n        if you intend to validate multiple instances with\n        the same schema, you likely would prefer using the\n        `jsonschema.protocols.Validator.validate` method directly on a\n        specific validator (e.g. ``Draft202012Validator.validate``).\n    \n    \n        Arguments:\n    \n            instance:\n    \n                The instance to validate\n    \n            schema:\n    \n                The schema to validate with\n    \n            cls (jsonschema.protocols.Validator):\n    \n                The class that will be used to validate the instance.\n    \n        If the ``cls`` argument is not provided, two things will happen\n        in accordance with the specification. First, if the schema has a\n        :kw:`$schema` keyword containing a known meta-schema [#]_ then the\n        proper validator will be used. The specification recommends that\n        all schemas contain :kw:`$schema` properties for this reason. If no\n        :kw:`$schema` property is found, the default validator class is the\n        latest released draft.\n    \n        Any other provided positional and keyword arguments will be passed\n        on when instantiating the ``cls``.\n    \n        Raises:\n    \n            `jsonschema.exceptions.ValidationError`:\n    \n                if the instance is invalid\n    \n            `jsonschema.exceptions.SchemaError`:\n    \n                if the schema itself is invalid\n    \n        .. rubric:: Footnotes\n        .. [#] known by a validator registered with\n            `jsonschema.validators.validates`\n    \n        \"\"\"\n        if cls is None:\n            cls = validator_for(schema)\n    \n        cls.check_schema(schema)\n        validator = cls(schema, *args, **kwargs)\n        error = exceptions.best_match(validator.iter_errors(instance))\n        if error is not None:\n>           raise error\nE           jsonschema.exceptions.ValidationError: 'name' is a required property\nE           \nE           Failed validating 'required' in schema:\nE               {'type': 'object',\nE                'properties': {'id': {'type': ['string', 'null']},\nE                               'name': {'type': 'string'},\nE                               'deleted': {'type': ['boolean', 'null']},\nE                               'website': {'type': ['string', 'null']},\nE                               'emailAddress': {'type': ['string', 'null']},\nE                               'phoneNumber': {'type': ['string', 'null']},\nE                               'type': {'type': ['string', 'null']},\nE                               'industry': {'type': ['string', 'null']},\nE                               'sicCode': {'type': ['string', 'null']},\nE                               'billingAddressStreet': {'type': ['string', 'null']},\nE                               'billingAddressCity': {'type': ['string', 'null']},\nE                               'billingAddressState': {'type': ['string', 'null']},\nE                               'billingAddressCountry': {'type': ['string', 'null']},\nE                               'billingAddressPostalCode': {'type': ['string',\nE                                                                     'null']},\nE                               'shippingAddressStreet': {'type': ['string', 'null']},\nE                               'shippingAddressCity': {'type': ['string', 'null']},\nE                               'shippingAddressState': {'type': ['string', 'null']},\nE                               'shippingAddressCountry': {'type': ['string', 'null']},\nE                               'shippingAddressPostalCode': {'type': ['string',\nE                                                                      'null']},\nE                               'description': {'type': ['string', 'null']},\nE                               'createdAt': {'type': ['string', 'null']},\nE                               'modifiedAt': {'type': ['string', 'null']},\nE                               'electronicAddressScheme': {'type': ['string', 'null']},\nE                               'electronicAddressIdentifier': {'type': ['string',\nE                                                                        'null']},\nE                               'emailAddressIsOptedOut': {'type': ['boolean', 'null']},\nE                               'emailAddressIsInvalid': {'type': ['boolean', 'null']},\nE                               'phoneNumberIsOptedOut': {'type': ['boolean', 'null']},\nE                               'phoneNumberIsInvalid': {'type': ['boolean', 'null']},\nE                               'emailAddressData': {'type': 'array', 'items': {}},\nE                               'phoneNumberData': {'type': 'array', 'items': {}},\nE                               'campaignId': {'type': ['string', 'null']},\nE                               'campaignName': {'type': ['string', 'null']},\nE                               'createdById': {'type': ['string', 'null']},\nE                               'createdByName': {'type': ['string', 'null']},\nE                               'modifiedById': {'type': ['string', 'null']},\nE                               'modifiedByName': {'type': ['string', 'null']},\nE                               'assignedUserId': {'type': ['string', 'null']},\nE                               'assignedUserName': {'type': ['string', 'null']},\nE                               'teamsIds': {'type': 'array', 'items': {}},\nE                               'teamsNames': {'type': 'object'},\nE                               'originalLeadId': {'type': ['string', 'null']},\nE                               'originalLeadName': {'type': ['string', 'null']},\nE                               'priceBookId': {'type': ['string', 'null']},\nE                               'priceBookName': {'type': ['string', 'null']},\nE                               'isFollowed': {'type': ['boolean', 'null']},\nE                               'followersIds': {'type': 'array', 'items': {}},\nE                               'followersNames': {'type': 'object'},\nE                               'isStarred': {'type': ['boolean', 'null']},\nE                               'supplierId': {'type': ['string', 'null']},\nE                               'supplierName': {'type': ['string', 'null']}},\nE                'required': ['name']}\nE           \nE           On instance:\nE               {'messageTranslation': {'label': 'validationFailure',\nE                                       'scope': None,\nE                                       'data': {'field': 'phoneNumber',\nE                                                'type': 'valid'}}}\n\n/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/jsonschema/validators.py:1332: ValidationError\n\nDuring handling of the above exception, another exception occurred:\n\nsetup_edit_account = ({'Espo-Authorization': 'YWRtaW46NjI0MjkyNTU=', 'X-Api-Key': 'f542db99f09e823eeb14cd558f104fef'}, {'assignedUserId': '...f4f2dfe619515', 'assignedUserName': 'Admin', 'billingAddressCity': 'New Kari', 'billingAddressCountry': 'Kuwait', ...})\n\n    @pytest.mark.regression\n    @pytest.mark.functional\n    @pytest.mark.xfail(reason=\"This test case is expected to fail due to known issue.\", condition=True)\n    def test_edit_account_phoneNumber_invalid(setup_edit_account):\n        headers, account = setup_edit_account\n        data = create_account_data(name=\"prueba nueva\", billingAddressCity=\"prueba\",\n                                                                     billingAddressCountry=\"prueba\",\n                                                                     billingAddressPostalCode=\"prueba\",\n                                                                     billingAddressState=\"prueba\",\n                                                                     billingAddressStreet=\"prueba\",\n                                                                     description=\"prueba\", emailAddress=\"prueba@prueba.com\",\n                                                                     industry=\"Architecture\", phoneNumber=\"+1555dsf5555555\",\n                                                                     shippingAddressCity=\"prueba\",\n                                                                     shippingAddressCountry=\"prueba\",\n                                                                     shippingAddressPostalCode=\"prueba\",\n                                                                     shippingAddressState=\"prueba\",\n                                                                     shippingAddressStreet=\"prueba\", type=\"Customer\",\n                                                                     website=\"prueba.com\")\n        response = EspocrmRequest().put(EndpointAccount.view(account['id']), headers, data)\n        AssertionStatusCode().assert_status_code_400(response)\n>       AssertionAccounts().assert_account_view_schema_file(response.json())\n\ntest/Cuentas/test_edit_account.py:145: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/assertions/accounts_assertions.py:56: in assert_account_view_schema_file\n    return AssertionSchemas().validate_json_schema(payload, \"view_account_schema.json\")\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = {'messageTranslation': {'data': {'field': 'phoneNumber', 'type': 'valid'}, 'label': 'validationFailure', 'scope': None}}\nschema_file = 'view_account_schema.json'\n\n    @staticmethod\n    def validate_json_schema(response, schema_file):\n        try:\n            schema = load_schema_resource(schema_file)\n        except FileNotFoundError:\n            pytest.fail(f\"Schema file '{schema_file}' not found\")\n        except json.JSONDecodeError as err:\n            pytest.fail(f\"Failed to decode JSON schema: {err}\")\n    \n        try:\n            jsonschema.validate(instance=response, schema=schema)\n            return True\n        except jsonschema.exceptions.ValidationError as err:\n>           pytest.fail(f\"JSON schema validation failed: {err}\")\nE           Failed: JSON schema validation failed: 'name' is a required property\nE           \nE           Failed validating 'required' in schema:\nE               {'type': 'object',\nE                'properties': {'id': {'type': ['string', 'null']},\nE                               'name': {'type': 'string'},\nE                               'deleted': {'type': ['boolean', 'null']},\nE                               'website': {'type': ['string', 'null']},\nE                               'emailAddress': {'type': ['string', 'null']},\nE                               'phoneNumber': {'type': ['string', 'null']},\nE                               'type': {'type': ['string', 'null']},\nE                               'industry': {'type': ['string', 'null']},\nE                               'sicCode': {'type': ['string', 'null']},\nE                               'billingAddressStreet': {'type': ['string', 'null']},\nE                               'billingAddressCity': {'type': ['string', 'null']},\nE                               'billingAddressState': {'type': ['string', 'null']},\nE                               'billingAddressCountry': {'type': ['string', 'null']},\nE                               'billingAddressPostalCode': {'type': ['string',\nE                                                                     'null']},\nE                               'shippingAddressStreet': {'type': ['string', 'null']},\nE                               'shippingAddressCity': {'type': ['string', 'null']},\nE                               'shippingAddressState': {'type': ['string', 'null']},\nE                               'shippingAddressCountry': {'type': ['string', 'null']},\nE                               'shippingAddressPostalCode': {'type': ['string',\nE                                                                      'null']},\nE                               'description': {'type': ['string', 'null']},\nE                               'createdAt': {'type': ['string', 'null']},\nE                               'modifiedAt': {'type': ['string', 'null']},\nE                               'electronicAddressScheme': {'type': ['string', 'null']},\nE                               'electronicAddressIdentifier': {'type': ['string',\nE                                                                        'null']},\nE                               'emailAddressIsOptedOut': {'type': ['boolean', 'null']},\nE                               'emailAddressIsInvalid': {'type': ['boolean', 'null']},\nE                               'phoneNumberIsOptedOut': {'type': ['boolean', 'null']},\nE                               'phoneNumberIsInvalid': {'type': ['boolean', 'null']},\nE                               'emailAddressData': {'type': 'array', 'items': {}},\nE                               'phoneNumberData': {'type': 'array', 'items': {}},\nE                               'campaignId': {'type': ['string', 'null']},\nE                               'campaignName': {'type': ['string', 'null']},\nE                               'createdById': {'type': ['string', 'null']},\nE                               'createdByName': {'type': ['string', 'null']},\nE                               'modifiedById': {'type': ['string', 'null']},\nE                               'modifiedByName': {'type': ['string', 'null']},\nE                               'assignedUserId': {'type': ['string', 'null']},\nE                               'assignedUserName': {'type': ['string', 'null']},\nE                               'teamsIds': {'type': 'array', 'items': {}},\nE                               'teamsNames': {'type': 'object'},\nE                               'originalLeadId': {'type': ['string', 'null']},\nE                               'originalLeadName': {'type': ['string', 'null']},\nE                               'priceBookId': {'type': ['string', 'null']},\nE                               'priceBookName': {'type': ['string', 'null']},\nE                               'isFollowed': {'type': ['boolean', 'null']},\nE                               'followersIds': {'type': 'array', 'items': {}},\nE                               'followersNames': {'type': 'object'},\nE                               'isStarred': {'type': ['boolean', 'null']},\nE                               'supplierId': {'type': ['string', 'null']},\nE                               'supplierName': {'type': ['string', 'null']}},\nE                'required': ['name']}\nE           \nE           On instance:\nE               {'messageTranslation': {'label': 'validationFailure',\nE                                       'scope': None,\nE                                       'data': {'field': 'phoneNumber',\nE                                                'type': 'valid'}}}\n\nsrc/assertions/schema_assertions.py:21: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1728476378642,"stop":1728476378643,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"get_headers","time":{"start":1728476378643,"stop":1728476378643,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"setup_edit_account","time":{"start":1728476404194,"stop":1728476404446,"duration":252},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"afterStages":[{"name":"setup_edit_account::0","time":{"start":1728476404674,"stop":1728476404898,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"tag","value":"@pytest.mark.xfail(reason='This test case is expected to fail due to known issue.', condition=True)"},{"name":"tag","value":"functional"},{"name":"tag","value":"regression"},{"name":"parentSuite","value":"test.Cuentas"},{"name":"suite","value":"test_edit_account"},{"name":"host","value":"fv-az1498-712"},{"name":"thread","value":"2130-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.Cuentas.test_edit_account"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["functional","regression","@pytest.mark.xfail(reason='This test case is expected to fail due to known issue.', condition=True)"]},"source":"5925b0fa470ebc8e.json","parameterValues":[]}